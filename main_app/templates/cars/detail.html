{% extends 'base.html' %}
{% block content %}
<h1>Car Details</h1>

<div>
    <p>Brand: {{ car.brand }}</p>
    <p>Model: {{ car.model }}</p>
    <p>Year: {{ car.year }}</p>
    <p>Price Per Day: ${{ car.price_per_day }}</p>
    <p>Description: {{ car.description }}</p>
</div>

<div class="col s6">
    <form action="{% url 'add_booking' car.id %}" method="POST">
        {% csrf_token %}
        <!-- Render the inputs -->
        {{ booking_form.as_p }}
        <input type="submit" class="btn" value="Book!">
    </form>

</div>
<p>{{ error_msg }}</p>

<!-- Review/Comment Section -->
<div>
    <h2>Leave a Review</h2>
      <div>
        <label for="comment">Comment:</label>
        <textarea id="comment" name="comment" rows="4" cols="50"></textarea>
      </div>
      <div>
        <label for="rating">Rating:</label>
        <select id="rating" name="rating">
          <option value="1">1 Star</option>
          <option value="2">2 Stars</option>
          <option value="3">3 Stars</option>
          <option value="4">4 Stars</option>
          <option value="5">5 Stars</option>
        </select>
      </div>
      <form action="{% url 'add_review' car_id=car.id %}" method="POST">
        {% csrf_token %}
        {{ review_form.as_p }}
        <input type="hidden" name="car_id" value="{{ car.id }}">
        <button type="submit">Submit Review</button>
      </form>
  </div>
  
  <!-- Display Existing Reviews -->
  
  <div>
    <h2>Reviews</h2>
    <ul>
      {% for review in reviews %}
        <li>
          <p> {{ review.content }}</p>
          <p>Rating: {{ review.rating }} ‚≠ê</p>
          <p>User: {{ review.user.username }}</p>
        </li>
      {% endfor %}
    </ul>
  </div>




<script>
    const startDateEl = document.getElementById('id_trip_start');
    const endDateEl = document.getElementById('id_trip_end');
    // M is Materialize's global variable
    M.Datepicker.init(startDateEl, {
        format: 'yyyy-mm-dd',
        defaultDate: new Date(),
        setDefaultDate: true,
        autoClose: true
    });
    M.Datepicker.init(endDateEl, {
        format: 'yyyy-mm-dd',
        defaultDate: new Date(),
        setDefaultDate: true,
        autoClose: true
    });
</script>

{% endblock %}